@model StudentStrandQuizLaunchViewModel
@{
    ViewData["Title"] = "Strand Quiz: " + Model.QuizTitle;
}
@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="~/css/quiz-launch.css" />
}
<div class="quiz-hero mb-4">
  <div class="position-relative" style="z-index:2;">
    <h2 class="mb-2 fw-bold" style="font-size:2rem; line-height:1.1;">@Model.QuizTitle</h2>
    <p class="text-info small mb-3" style="font-weight:500; letter-spacing:.5px;">Strand: <strong class="text-white">@Model.StrandName</strong></p>
    @if(!string.IsNullOrWhiteSpace(Model.Description)){
        <p class="mb-3" style="max-width:720px; color:#d2e9f7;">@Model.Description</p>
    }
    <ul class="quiz-meta list-unstyled small text-light mb-2">
        <li><i class="fa-solid fa-bullseye me-1" aria-hidden="true"></i> <strong>@Model.TotalQuestions</strong> questions</li>
        <li><i class="fa-solid fa-hourglass-half me-1" aria-hidden="true"></i> <strong>@(Model.TimeLimitSeconds.HasValue ? (Model.TimeLimitSeconds.Value/60)+" mins" : "No time limit")</strong></li>
        <li><i class="fa-solid fa-shuffle me-1" aria-hidden="true"></i> Random order each playthrough</li>
    </ul>
    <div class="progress-launch" aria-hidden="true"><span></span></div>
    <div class="quiz-badges" aria-label="Feature badges">
      <div class="quiz-badge" title="Adaptive question ordering"><i class="fa-solid fa-brain" aria-hidden="true"></i> <span class="visually-hidden">Adaptive ordering</span> Smart Mix</div>
      <div class="quiz-badge" title="Earn shields by streaks"><i class="fa-solid fa-shield-halved" aria-hidden="true"></i> <span class="visually-hidden">Shield streak</span> Streak Shields</div>
      <div class="quiz-badge" title="Immediate feedback"><i class="fa-solid fa-bolt" aria-hidden="true"></i> <span class="visually-hidden">Instant feedback</span> Instant</div>
      <div class="quiz-badge" title="Beat your own pace"><i class="fa-solid fa-flag-checkered" aria-hidden="true"></i> <span class="visually-hidden">Challenge mode</span> Challenge</div>
    </div>
    <div class="mt-4">
        <a asp-controller="StudentResults" asp-action="Index" class="btn btn-outline-light me-3"><i class="fa-solid fa-arrow-left-long me-1" aria-hidden="true"></i><span class="visually-hidden">Back</span>Back</a>
        <a asp-action="Play" asp-route-quizId="@Model.QuizId" class="btn btn-dark start-btn pulse" id="startQuizBtn"><i class="fa-solid fa-play me-1" aria-hidden="true"></i>Start Quiz 🚀</a>
    </div>
  </div>
</div>
<div class="alert alert-info small mb-0">Beta quiz gameplay implemented. Answers kept in session until you finish.</div>
<script>
(function(){
  const btn = document.getElementById('startQuizBtn');
  if(btn){
     btn.addEventListener('click', ()=>{
        for(let i=0;i<36;i++){
          const c=document.createElement('span');
          c.className='confetti-piece';
          c.setAttribute('aria-hidden','true');
          c.style.setProperty('--x', (window.innerWidth/2 + (Math.random()*240-120))+'px');
          c.style.setProperty('--r', (Math.random()*360)+'deg');
          c.style.setProperty('--c', ['#19c1b6','#1e88e5','#7b1fa2','#ffce3a','#ff6f61'][Math.floor(Math.random()*5)]);
          document.body.appendChild(c);
          setTimeout(()=>c.remove(), 2400);
        }
     }, { once:true });
  }
})();
</script>
